<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt Engineering Monopoly</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); min-height: 100vh; color: #333; }
        .game-container { max-width: 90%; margin: 20px auto; padding: 20px; background: rgba(255, 255, 255, 0.95); border-radius: 15px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: #e74c3c; font-size: 3em; margin-bottom: 10px; }
        .game-setup { background: #ecf0f1; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .setup-section { margin-bottom: 20px; }
        .setup-section h3 { margin-bottom: 10px; color: #2c3e50; font-size: 1.8em; }
        .rounds-selector { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .rounds-selector label { font-weight: bold; font-size: 1.4em; }
        .rounds-selector input { padding: 8px 15px; border: 2px solid #3498db; border-radius: 8px; font-size: 1.2em; width: 100px; }
        
        /* ä¿®æ”¹åœ˜éšŠè¨­ç½®ç‚ºæ’åˆ—æ¨¡å¼ */
        .team-setup {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .team-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 3px solid #bdc3c7;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 250px;
            max-width: calc(50% - 15px); /* ç¢ºä¿æ¯è¡Œæœ€å¤šæ”¾ç½®å…©å€‹åœ˜éšŠ */
        }
        
        .team-card.active { border-color: #3498db; box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3); }
        .team-name { font-weight: bold; font-size: 1.5em; margin-bottom: 10px; color: #2c3e50; }
        .team-name-input { width: 100%; padding: 8px; border: 2px solid #bdc3c7; border-radius: 5px; font-size: 1.2em; margin-bottom: 10px; }
        
        .team-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 1.1em;
        }
        
        .stat {
            background: #f8f9fa;
            padding: 5px 8px;
            border-radius: 4px;
            text-align: center;
            flex: 1;
        }
        
        .remove-team-btn { background: #e74c3c; color: white; border: none; padding: 8px 10px; border-radius: 5px; cursor: pointer; font-size: 1.1em; margin-top: 10px; width: 100%; }
        .remove-team-btn:hover { background: #c0392b; }
        
        /* åŸå§‹å¤§å¯Œç¿æ£‹ç›¤æ¨£å¼ */
        .monopoly-board { width: 90%; max-width: 1200px; height: calc(90vw * 0.625); max-height: 750px; margin: 0 auto 20px; position: relative; background: #2ecc71; border: 8px solid #27ae60; border-radius: 10px; aspect-ratio: 16/9; }
        .board-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60%; height: 60%; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; padding: 20px; }
        .board-center img { max-width: 80%; max-height: 80%; }
        .board-space { position: absolute; background: white; border: 2px solid #34495e; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 1em; text-align: center; padding: 10px; cursor: pointer; transition: all 0.3s ease; overflow: hidden; word-break: keep-all; }
        .board-space:hover { transform: scale(1.05); z-index: 10; }
        .space-name { font-weight: bold; line-height: 1.3; margin-bottom: 5px; font-size: 1.2em; width: 100%; text-align: center; }
        .space-cost { font-size: 1.1em; color: #e74c3c; font-weight: bold; background: #fff3cd; padding: 2px 4px; border-radius: 3px; }
        
        /* Rectangular board with 8 horizontal x 5 vertical spaces */
        .board-space:not(.corner) { width: 12.5%; height: 20%; }
        .corner { width: 12.5%; height: 20%; font-size: 1.2em; }
        
        /* Bottom row (8 spaces) */
        .space-0 { bottom: 0; left: 0; }
        .space-1 { bottom: 0; left: 12.5%; }
        .space-2 { bottom: 0; left: 25%; }
        .space-3 { bottom: 0; left: 37.5%; }
        .space-4 { bottom: 0; left: 50%; }
        .space-5 { bottom: 0; left: 62.5%; }
        .space-6 { bottom: 0; left: 75%; }
        .space-7 { bottom: 0; left: 87.5%; }
        
        /* Right column (3 spaces) */
        .space-8 { bottom: 20%; right: 0; }
        .space-9 { bottom: 40%; right: 0; }
        .space-10 { bottom: 60%; right: 0; }
        
        /* Top row (8 spaces) */
        .space-11 { top: 0; right: 0; }
        .space-12 { top: 0; right: 12.5%; }
        .space-13 { top: 0; right: 25%; }
        .space-14 { top: 0; right: 37.5%; }
        .space-15 { top: 0; right: 50%; }
        .space-16 { top: 0; right: 62.5%; }
        .space-17 { top: 0; right: 75%; }
        .space-18 { top: 0; right: 87.5%; }
        
        /* Left column (3 spaces) - ä¿®æ­£é †åºï¼Œå¾ä¸Šå¾€ä¸‹ */
        .space-19 { top: 20%; left: 0; }
        .space-20 { top: 40%; left: 0; }
        .space-21 { top: 60%; left: 0; }
        
        .player-piece { width: 30px; height: 30px; position: absolute; z-index: 20; transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1); display: flex; align-items: center; justify-content: center; font-size: 1.5em; }
        .player-piece.moving { transition: all 0.4s ease-in-out; }
        .team-red .piece-icon { filter: drop-shadow(0 2px 4px rgba(231, 76, 60, 0.5)); }
        .team-blue .piece-icon { filter: drop-shadow(0 2px 4px rgba(52, 152, 219, 0.5)); }
        .team-green .piece-icon { filter: drop-shadow(0 2px 4px rgba(39, 174, 96, 0.5)); }
        .team-yellow .piece-icon { filter: drop-shadow(0 2px 4px rgba(241, 196, 15, 0.5)); }
        
        .basic { background: #e74c3c; color: white; } 
        .detailed { background: #f39c12; color: white; } 
        .collaboration { background: #27ae60; color: white; } 
        .tools { background: #8e44ad; color: white; } 
        .ethics { background: #2980b9; color: white; }
        .start { background: #2ecc71; color: white; font-weight: bold; }
        .opportunity { background: #3498db; color: white; font-weight: bold; }
        .fortune { background: #e67e22; color: white; font-weight: bold; }
        .toolkit { background: #9b59b6; color: white; font-weight: bold; }
        
        .game-controls { display: flex; justify-content: center; gap: 20px; margin: 20px 0; flex-wrap: wrap; }
        .dice-container { display: flex; gap: 10px; align-items: center; }
        .dice { width: 60px; height: 60px; background: linear-gradient(45deg, #ff6b6b, #ee5a24); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2em; color: white; cursor: pointer; transition: all 0.3s ease; }
        .dice:hover { transform: scale(1.1); }
        .dice.rolling { animation: spin 1s ease-in-out; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .btn { background: linear-gradient(45deg, #3498db, #2980b9); color: white; border: none; padding: 12px 25px; border-radius: 25px; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; }
        .modal-content { background: white; margin: 5% auto; padding: 30px; border-radius: 15px; width: 90%; max-width: 600px; text-align: center; }
        .modal-content h3 { font-size: 1.8em; margin-bottom: 15px; }
        .modal-content p { font-size: 1.4em; margin-bottom: 20px; }
        .question-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .option { background: #ecf0f1; border: 2px solid transparent; padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; font-size: 1.3em; }
        .option:hover { background: #d5dbdb; border-color: #3498db; }
        .option.correct { background: #2ecc71; color: white; }
        .option.incorrect { background: #e74c3c; color: white; }
        .leaderboard { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; }
        .leaderboard h3 { font-size: 1.8em; margin-bottom: 15px; }
        .leaderboard-row { display: flex; justify-content: space-between; padding: 10px; margin: 5px 0; background: white; border-radius: 5px; font-size: 1.3em; }
        .leaderboard-row.first { background: linear-gradient(45deg, #f39c12, #e67e22); color: white; font-weight: bold; }
        .winner-announcement { background: linear-gradient(45deg, #f39c12, #e67e22); color: white; padding: 30px; border-radius: 15px; text-align: center; margin: 20px 0; font-size: 1.5em; }
        .message-toast { position: fixed; top: 20px; right: 20px; background: #2c3e50; color: white; padding: 15px 25px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); z-index: 2000; animation: slideIn 0.3s ease; font-size: 1.3em; }
        @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        /* Footer styling */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 10px 20px;
            text-align: center;
            font-size: 1em;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
        }
        .footer a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }
        .footer a:hover {
            color: #5dade2;
            text-decoration: underline;
        }
        
        /* Language selector styling */
        .language-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }
        .language-selector label {
            font-weight: bold;
            font-size: 1.4em;
            color: #2c3e50;
        }
        .language-selector select {
            padding: 8px 15px;
            border: 2px solid #3498db;
            border-radius: 8px;
            font-size: 1.2em;
            background-color: white;
            cursor: pointer;
        }
        .language-selector select:focus {
            outline: none;
            border-color: #e74c3c;
        }
        
        /* For 16:9 screens */
        @media (min-aspect-ratio: 16/9) {
            .game-container {
                max-width: 95%;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            .header h1 {
                font-size: 3.5em;
            }
            .setup-section h3 {
                font-size: 2.2em;
            }
            .space-name {
                font-size: 1.4em;
            }
            .space-cost {
                font-size: 1.3em;
            }
            .option {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 id="game-title">ğŸ¤– AIæç¤ºå·¥ç¨‹å¤§å¯Œç¿</h1>
            <p id="game-subtitle" style="font-size: 1.5em;">æŒæ¡AIæç¤ºæŠ€å·§ï¼Œèˆ‡AIåˆä½œï¼Œä½¿ç”¨å…è²»å·¥å…·ï¼</p>
            <div class="language-selector">
                <label for="language-select" id="language-label">èªè¨€:</label>
                <select id="language-select">
                    <option value="zh-tw">ç¹é«”ä¸­æ–‡</option>
                    <option value="en">English</option>
                    <option value="sw">Kiswahili</option>
                </select>
            </div>
        </div>
        <div class="game-setup">
            <div class="setup-section">
                <h3 id="settings-title">éŠæˆ²è¨­å®š</h3>
                <div class="rounds-selector">
                    <label for="max-rounds" id="rounds-label">å›åˆæ•¸:</label>
                    <input type="number" id="max-rounds" min="1" max="20" value="10">
                </div>
            </div>
            <div class="setup-section">
                <h3 id="teams-title">åœ˜éšŠ</h3>
                <div class="team-setup" id="teams-container"></div>
            </div>
            <div class="game-controls">
                <button class="btn" id="start-game-btn">é–‹å§‹éŠæˆ²</button>
                <button class="btn" id="add-team-btn">æ–°å¢åœ˜éšŠ</button>
                <div class="dice-container" style="display: none;" id="dice-controls">
                    <div class="dice" id="dice1">ğŸ²</div>
                    <div class="dice" id="dice2">ğŸ²</div>
                    <button class="btn" id="roll-dice-btn">æ“²éª°å­</button>
                </div>
            </div>
        </div>
        <div class="monopoly-board" id="game-board" style="display: none;">
        <div class="board-center">
                <img src="logo.png" alt="AI Monopoly Logo" style="max-width: 80%; max-height: 80%;">
                <div id="current-turn" style="margin-top: 20px; font-size: 1.4em;">
                    <strong id="current-turn-label">ç›®å‰å›åˆ: åœ˜éšŠ 1</strong>
                </div>
                <div id="round-counter" style="margin-top: 10px; font-size: 1.4em;">
                    <strong id="round-counter-label">å›åˆ: 1</strong>
                </div>
            </div>
        </div>
        <div class="leaderboard" id="leaderboard" style="display: none;">
            <h3 id="leaderboard-title">æ’è¡Œæ¦œ</h3>
            <div id="leaderboard-content"></div>
        </div>
    </div>
    <div class="modal" id="question-modal">
        <div class="modal-content">
            <h3 id="modal-title">å•é¡Œ</h3>
            <p id="modal-question"></p>
            <div class="question-options" id="modal-options"></div>
            <button class="btn" id="close-modal-btn">ç¹¼çºŒ</button>
        </div>
    </div>
    <script>
        class AIMonopoly {
            constructor() {
                this.teams = [
                    { id: 1, name: 'åœ˜éšŠAlpha', color: 'team-red', icon: 'â™Ÿï¸', position: 0, resources: 500, projects: 0 },
                    { id: 2, name: 'åœ˜éšŠBeta', color: 'team-blue', icon: 'â™', position: 0, resources: 500, projects: 0 }
                ];
                this.currentTeam = 0;
                this.gameStarted = false;
                this.gameEnded = false;
                this.maxRounds = 10;
                this.currentRound = 1;
                this.turnCount = 0;
                this.availableIcons = ['â™”', 'â™•', 'â™–', 'â™—', 'â™˜', 'â™™', 'â™š', 'â™›', 'â™œ', 'â™', 'â™', 'â™Ÿ'];
                
                // Added language support
                this.currentLanguage = "zh-tw";
                this.translations = {
                    "en": this.getEnglishTranslations(),
                    "zh-tw": this.getChineseTranslations(),
                    "sw": this.getSwahiliTranslations()
                };
                
                // Load questions from external JSON
                this.questionsData = null;
                this.loadQuestions();
                
                // èª¿æ•´å·¦å´æ ¼å­çš„é †åº (19, 20, 21)ï¼Œç¢ºä¿å®ƒå€‘å¾ä¸Šå¾€ä¸‹æ’åˆ—
                this.originalBoardSpaces = [
                    { name: 'START', type: 'start', cost: 0 }, 
                    { name: 'Basic Prompts', type: 'basic', cost: 100 }, 
                    { name: 'Basic Prompts', type: 'basic', cost: 150 }, 
                    { name: 'Opportunity', type: 'opportunity', cost: 0 },
                    { name: 'Detailed Prompts', type: 'detailed', cost: 200 }, 
                    { name: 'Detailed Prompts', type: 'detailed', cost: 250 }, 
                    { name: 'Detailed Prompts', type: 'detailed', cost: 200 }, 
                    { name: 'Fortune', type: 'fortune', cost: 0 },
                    { name: 'AI Collaboration', type: 'collaboration', cost: 300 }, 
                    { name: 'AI Collaboration', type: 'collaboration', cost: 250 }, 
                    { name: 'Opportunity', type: 'opportunity', cost: 0 }, 
                    { name: 'Fortune', type: 'fortune', cost: 0 },
                    { name: 'AI Tools', type: 'tools', cost: 400 }, 
                    { name: 'AI Tools', type: 'tools', cost: 350 }, 
                    { name: 'AI Tools', type: 'tools', cost: 400 }, 
                    { name: 'Opportunity', type: 'opportunity', cost: 0 },
                    { name: 'AI Ethics', type: 'ethics', cost: 350 }, 
                    { name: 'AI Ethics', type: 'ethics', cost: 400 }, 
                    { name: 'Fortune', type: 'fortune', cost: 0 }, 
                    { name: 'AI Collaboration', type: 'collaboration', cost: 200 },
                    { name: 'AI Collaboration', type: 'collaboration', cost: 250 },
                    { name: 'AI Ethics', type: 'ethics', cost: 350 }
                ];
                
                this.boardSpaces = this.getLocalizedBoardSpaces();
                this.opportunities = this.getOpportunities();
                this.fortunes = this.getFortunes();
                this.questions = this.getQuestions();
                
                this.initializeGame();
            }

            getEnglishTranslations() {
                return {
                    // UI elements
                    "gameTitle": "ğŸ¤– AI Prompt Engineering Monopoly",
                    "gameSubtitle": "Master AI Prompting, Collaboration and Free Tools!",
                    "languageLabel": "Language:",
                    "settingsTitle": "Game Settings",
                    "roundsLabel": "Number of Rounds:",
                    "teamsTitle": "Teams",
                    "startGameBtn": "Start Game",
                    "addTeamBtn": "Add Team",
                    "rollDiceBtn": "Roll Dice",
                    "continueBtn": "Continue",
                    "boardTitle": "AI PROMPT ENGINEERING",
                    "boardSubtitle": "Writing Better Prompts",
                    "currentTurnLabel": "Current Turn: ",
                    "roundLabel": "Round: ",
                    "leaderboardTitle": "Leaderboard",
                    "removeTeamBtn": "Remove Team",
                    "questionTitle": "Question",
                    "startingResources": "Starting Resources: $500",
                    "colorLabel": "Color: ",
                    
                    // Game messages
                    "maxTeamsWarning": "Maximum 4 teams allowed!",
                    "minTeamsWarning": "Must have at least 2 teams!",
                    "invalidRoundsWarning": "Please enter a valid number of rounds (1-20)",
                    "gameStartedMsg": "Game started! Roll the dice to begin!",
                    "projectCompletedMsg": " completed a full AI project! ğŸ‰ +$1000 resources!",
                    "toolkitTitle": "ğŸ› ï¸ AI Tools Toolkit",
                    "toolkitQuestion": "<em>Visit the Free AI Tools Collection to discover useful prompting templates and free AI tools.</em><br><br>Would you like to visit the toolkit now?",
                    "toolkitYes": "Yes, open toolkit",
                    "toolkitNo": "No, continue game",
                    "toolkitOpenedMsg": "Toolkit opened in new window. Stay on this block.",
                    "continuingGameMsg": "Continuing game. Staying on this block.",
                    "opportunityTitle": "ğŸ¯ Opportunity!",
                    "fortuneTitle": "âš ï¸ Fortune!",
                    "correctAnswerMsg": "âœ… Correct! Earned ",
                    "correctAnswerMsg2": " resources!",
                    "incorrectAnswerMsg": "âŒ Incorrect! No resources earned!",
                    "gameOverMsg": "Game Over! Check the results above!",
                    "winnerAnnouncement": "ğŸ† Game Over! ğŸ†",
                    "winnerMsg": " wins with $",
                    "winnerMsg2": " resources!",
                    "finalStandingsMsg": "Final Standings:",
                    "rolledMsg": " rolled ",
                    "landedOnMsg": "Landed on ",
                    "resourcesLabel": "Resources: $",
                    "positionLabel": "Position: ",
                    "projectsLabel": "Projects: "
                }
            }
            
            getChineseTranslations() {
                return {
                    // UI elements
                    "gameTitle": "ğŸ¤– AIæç¤ºå·¥ç¨‹å¤§å¯Œç¿",
                    "gameSubtitle": "æŒæ¡AIæç¤ºæŠ€å·§ï¼Œèˆ‡AIåˆä½œï¼Œä½¿ç”¨å…è²»å·¥å…·ï¼",
                    "languageLabel": "èªè¨€ï¼š",
                    "settingsTitle": "éŠæˆ²è¨­å®š",
                    "roundsLabel": "å›åˆæ•¸ï¼š",
                    "teamsTitle": "åœ˜éšŠ",
                    "startGameBtn": "é–‹å§‹éŠæˆ²",
                    "addTeamBtn": "æ–°å¢åœ˜éšŠ",
                    "rollDiceBtn": "æ“²éª°å­",
                    "continueBtn": "ç¹¼çºŒ",
                    "boardTitle": "AIæç¤ºå·¥ç¨‹",
                    "boardSubtitle": "å¯«å‡ºæ›´å¥½çš„æç¤ºè©",
                    "currentTurnLabel": "ç›®å‰å›åˆï¼š ",
                    "roundLabel": "å›åˆï¼š ",
                    "leaderboardTitle": "æ’è¡Œæ¦œ",
                    "removeTeamBtn": "ç§»é™¤åœ˜éšŠ",
                    "questionTitle": "å•é¡Œ",
                    "startingResources": "èµ·å§‹è³‡é‡‘ï¼š $500",
                    "colorLabel": "é¡è‰²ï¼š ",
                    
                    // Game messages
                    "maxTeamsWarning": "æœ€å¤šåªèƒ½æœ‰4å€‹åœ˜éšŠï¼",
                    "minTeamsWarning": "è‡³å°‘è¦æœ‰2å€‹åœ˜éšŠï¼",
                    "invalidRoundsWarning": "è«‹è¼¸å…¥æœ‰æ•ˆçš„å›åˆæ•¸ï¼ˆ1-20ï¼‰",
                    "gameStartedMsg": "éŠæˆ²é–‹å§‹ï¼æ“²éª°å­é–‹å§‹éŠæˆ²ï¼",
                    "projectCompletedMsg": " å®Œæˆäº†ä¸€å€‹AIåœˆæ•¸ï¼ğŸ‰ +$1000è³‡é‡‘ï¼",
                    "toolkitTitle": "ğŸ› ï¸ AIå·¥å…·ç®±",
                    "toolkitQuestion": "<em>è¨ªå•å…è²»AIå·¥å…·é›†åˆï¼Œæ¢ç´¢æœ‰ç”¨çš„æç¤ºè©æ¨¡æ¿å’Œå…è²»AIå·¥å…·ã€‚</em><br><br>ä½ æƒ³ç¾åœ¨è¨ªå•å·¥å…·ç®±å—ï¼Ÿ",
                    "toolkitYes": "æ˜¯çš„ï¼Œæ‰“é–‹å·¥å…·ç®±",
                    "toolkitNo": "ä¸ï¼Œç¹¼çºŒéŠæˆ²",
                    "toolkitOpenedMsg": "å·¥å…·ç®±åœ¨æ–°è¦–çª—ä¸­æ‰“é–‹äº†ã€‚ç•™åœ¨é€™å€‹æ ¼å­ä¸Šã€‚",
                    "continuingGameMsg": "ç¹¼çºŒéŠæˆ²ã€‚ç•™åœ¨é€™å€‹æ ¼å­ä¸Šã€‚",
                    "opportunityTitle": "ğŸ¯ æ©Ÿæœƒï¼",
                    "fortuneTitle": "âš ï¸ å‘½é‹ï¼",
                    "correctAnswerMsg": "âœ… æ­£ç¢ºï¼ç²å¾—äº† ",
                    "correctAnswerMsg2": " è³‡é‡‘ï¼",
                    "incorrectAnswerMsg": "âŒ ä¸æ­£ç¢ºï¼æ²’æœ‰ç²å¾—è³‡é‡‘ï¼",
                    "gameOverMsg": "éŠæˆ²çµæŸï¼æŸ¥çœ‹ä¸Šæ–¹çš„çµæœï¼",
                    "winnerAnnouncement": "ğŸ† éŠæˆ²çµæŸï¼ ğŸ†",
                    "winnerMsg": " ç²å‹ï¼Œè³‡é‡‘ $",
                    "winnerMsg2": "ï¼",
                    "finalStandingsMsg": "æœ€çµ‚æ’åï¼š",
                    "rolledMsg": " æ“²å‡ºäº† ",
                    "landedOnMsg": "è½åœ¨äº† ",
                    "resourcesLabel": "è³‡é‡‘ï¼š $",
                    "positionLabel": "ä½ç½®ï¼š ",
                    "projectsLabel": "åœˆæ•¸ï¼š "
                }
            }
            
            getSwahiliTranslations() {
                return {
                    // UI elements
                    "gameTitle": "ğŸ¤– Monopoli ya Uhandishi wa Maagizo ya AI",
                    "gameSubtitle": "Kuwa Mtaalam wa Maagizo, Ushirikiano na Zana za AI!",
                    "languageLabel": "Lugha:",
                    "settingsTitle": "Mipangilio ya Mchezo",
                    "roundsLabel": "Idadi ya Mizunguko:",
                    "teamsTitle": "Timu",
                    "startGameBtn": "Anza Mchezo",
                    "addTeamBtn": "Ongeza Timu",
                    "rollDiceBtn": "Rusha Dadu",
                    "continueBtn": "Endelea",
                    "boardTitle": "UHANDISHI WA MAAGIZO YA AI",
                    "boardSubtitle": "Kuandika Maagizo Bora",
                    "currentTurnLabel": "Zamu ya sasa: ",
                    "roundLabel": "Mzunguko: ",
                    "leaderboardTitle": "Ubao wa Fedha",
                    "removeTeamBtn": "Ondoa Timu",
                    "questionTitle": "Swali",
                    "startingResources": "Fedha za Kuanzia: $500",
                    "colorLabel": "Rangi: ",
                    
                    // Game messages
                    "maxTeamsWarning": "Timu 4 tu zinaruhusiwa!",
                    "minTeamsWarning": "Lazima uwe na angalau timu 2!",
                    "invalidRoundsWarning": "Tafadhali ingiza idadi halali ya mizunguko (1-20)",
                    "gameStartedMsg": "Mchezo umeanza! Rusha dadu kuanza!",
                    "projectCompletedMsg": " imekamilisha mradi wa AI! ğŸ‰ +$1000 fedha!",
                    "toolkitTitle": "ğŸ› ï¸ Zana za AI",
                    "toolkitQuestion": "<em>Tembelea Mkusanyiko wa Zana za AI Bila Malipo ili kugundua violezo vya maagizo na zana za AI bila malipo.</em><br><br>Je, ungependa kutembelea zana sasa?",
                    "toolkitYes": "Ndio, fungua zana",
                    "toolkitNo": "Hapana, endelea na mchezo",
                    "toolkitOpenedMsg": "Zana zimefunguliwa katika dirisha jipya. Kaa kwenye bloku hii.",
                    "continuingGameMsg": "Kuendelea na mchezo. Kubaki kwenye bloku hii.",
                    "opportunityTitle": "ğŸ¯ Fursa!",
                    "fortuneTitle": "âš ï¸ Bahati!",
                    "correctAnswerMsg": "âœ… Sahihi! Umepata ",
                    "correctAnswerMsg2": " fedha!",
                    "incorrectAnswerMsg": "âŒ Sikosahihi! Hukupata fedha!",
                    "gameOverMsg": "Mchezo Umekwisha! Angalia matokeo hapo juu!",
                    "winnerAnnouncement": "ğŸ† Mchezo Umekwisha! ğŸ†",
                    "winnerMsg": " imeshinda na $",
                    "winnerMsg2": " fedha!",
                    "finalStandingsMsg": "Msimamo wa Mwisho:",
                    "rolledMsg": " amerusha ",
                    "landedOnMsg": "Umetua kwenye ",
                    "resourcesLabel": "Fedha: $",
                    "positionLabel": "Nafasi: ",
                    "projectsLabel": "Miradi: "
                }
            }
            
            getLocalizedBoardSpaces() {
                // Clone the original spaces
                const spaces = JSON.parse(JSON.stringify(this.originalBoardSpaces));
                
                if (this.currentLanguage === "zh-tw") {
                    // Map Chinese translations for space names
                    const nameMap = {
                        'START': 'èµ·é»',
                        'Basic Prompts': 'åŸºæœ¬æç¤º',
                        'Detailed Prompts': 'è©³ç´°æç¤º',
                        'AI Collaboration': 'AIå”ä½œ',
                        'AI Tools': 'AIå·¥å…·',
                        'AI Ethics': 'AIå€«ç†',
                        'Opportunity': 'æ©Ÿæœƒ',
                        'Fortune': 'å‘½é‹'
                    };
                    
                    spaces.forEach(space => {
                        space.name = nameMap[space.name] || space.name;
                    });
                    
                } else if (this.currentLanguage === "sw") {
                    // Map Swahili translations for space names
                    const nameMap = {
                        'START': 'ANZA',
                        'Basic Prompts': 'Maagizo Msingi',
                        'Detailed Prompts': 'Maagizo Kamili',
                        'AI Collaboration': 'Ushirikiano wa AI',
                        'AI Tools': 'Zana za AI',
                        'AI Ethics': 'Maadili ya AI',
                        'Opportunity': 'Fursa',
                        'Fortune': 'Bahati'
                    };
                    
                    spaces.forEach(space => {
                        space.name = nameMap[space.name] || space.name;
                    });
                }
                
                return spaces;
            }
            
            getOpportunities() {
                if (this.currentLanguage === "en") {
                    return [
                        { message: "Your prompt was very clear! AI understood your request immediately. +$500 resources", effect: { resources: 500 } },
                        { message: "You learned about prompt templates! Improved efficiency. +$200 resources", effect: { resources: 200 } },
                        { message: "You successfully used AI to complete a project! +$400 resources", effect: { resources: 400 } },
                        { message: "You taught a classmate how to use AI tools effectively! +$300 resources", effect: { resources: 300 } },
                        { message: "You discovered a new free AI tool! +$300 resources", effect: { resources: 300 } },
                        { message: "Your question was specific and got a great response! +$600 resources", effect: { resources: 600 } },
                        { message: "You successfully identified an AI mistake and corrected it! +$400 resources", effect: { resources: 400 } },
                        { message: "You combined AI suggestions with your own ideas for a better result! +$350 resources", effect: { resources: 350 } },
                        { message: "You made a good AI ethics decision! +$250 resources", effect: { resources: 250 } },
                        { message: "You learned how to guide AI to generate better content! +$450 resources", effect: { resources: 450 } }
                    ];
                } else if (this.currentLanguage === "zh-tw") {
                    return [
                        { message: "ä½ çš„æç¤ºè©éå¸¸æ¸…æ™°ï¼AIç«‹åˆ»ç†è§£äº†ä½ çš„éœ€æ±‚ã€‚+$500è³‡é‡‘", effect: { resources: 500 } },
                        { message: "ä½ å­¸æœƒäº†æç¤ºè©æ¨¡æ¿ï¼æé«˜æ•ˆç‡ã€‚+$200è³‡é‡‘", effect: { resources: 200 } },
                        { message: "ä½ æˆåŠŸä½¿ç”¨AIå¹«åŠ©å®Œæˆäº†ä¸€å€‹å°ˆæ¡ˆï¼+$400è³‡é‡‘", effect: { resources: 400 } },
                        { message: "ä½ æ•™æœƒäº†åŒå­¸å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨AIå·¥å…·ï¼+$300è³‡é‡‘", effect: { resources: 300 } },
                        { message: "ä½ ç™¼ç¾äº†ä¸€å€‹æ–°çš„å…è²»AIå·¥å…·ï¼+$300è³‡é‡‘", effect: { resources: 300 } },
                        { message: "ä½ çš„å•é¡Œéå¸¸å…·é«”ï¼Œå¾—åˆ°äº†å¾ˆå¥½çš„å›ç­”ï¼+$600è³‡é‡‘", effect: { resources: 600 } },
                        { message: "ä½ æˆåŠŸè­˜åˆ¥å‡ºAIçš„éŒ¯èª¤å›ç­”ä¸¦ç³¾æ­£äº†ï¼+$400è³‡é‡‘", effect: { resources: 400 } },
                        { message: "ä½ å°‡AIçš„å»ºè­°èˆ‡è‡ªå·±çš„æƒ³æ³•çµåˆï¼Œå‰µé€ äº†æ›´å¥½çš„çµæœï¼+$350è³‡é‡‘", effect: { resources: 350 } },
                        { message: "ä½ åšäº†å¾ˆå¥½çš„AIå€«ç†æ±ºå®šï¼+$250è³‡é‡‘", effect: { resources: 250 } },
                        { message: "ä½ å­¸æœƒäº†å¦‚ä½•å¼•å°AIç”Ÿæˆæ›´å¥½çš„å…§å®¹ï¼+$450è³‡é‡‘", effect: { resources: 450 } }
                    ];
                } else { // Swahili
                    return [
                        { message: "Maagizo yako yalikuwa wazi! AI ilielewa ombi lako mara moja. +$500 fedha", effect: { resources: 500 } },
                        { message: "Umejifunza kuhusu violezo vya maagizo! Ufanisi umeimarika. +$200 fedha", effect: { resources: 200 } },
                        { message: "Umefanikiwa kutumia AI kukamilisha mradi! +$400 fedha", effect: { resources: 400 } },
                        { message: "Umefundisha mwanafunzi mwenzako jinsi ya kutumia zana za AI kwa ufanisi! +$300 fedha", effect: { resources: 300 } },
                        { message: "Umegundua zana mpya ya AI bila malipo! +$300 fedha", effect: { resources: 300 } },
                        { message: "Swali lako lilikuwa mahususi na ulipata jibu zuri! +$600 fedha", effect: { resources: 600 } },
                        { message: "Ulifanikiwa kutambua kosa la AI na kulisahihisha! +$400 fedha", effect: { resources: 400 } },
                        { message: "Umeunganisha mapendekezo ya AI na mawazo yako mwenyewe kwa matokeo bora! +$350 fedha", effect: { resources: 350 } },
                        { message: "Umefanya uamuzi mzuri wa maadili ya AI! +$250 fedha", effect: { resources: 250 } },
                        { message: "Umejifunza jinsi ya kuongoza AI kuzalisha maudhui bora! +$450 fedha", effect: { resources: 450 } }
                    ];
                }
            }
            
            getFortunes() {
                if (this.currentLanguage === "en") {
                    return [
                        { message: "Your prompt was too vague, AI didn't understand what you wanted. -$600 resources", effect: { resources: -600 } },
                        { message: "You forgot to check AI's answer and it had errors. -$300 resources", effect: { resources: -300 } },
                        { message: "Your prompt was missing important details, wasting time. -$500 resources", effect: { resources: -500 } },
                        { message: "You forgot to give clear instructions to the AI! -$400 resources", effect: { resources: -400 } },
                        { message: "Your question was too complicated, needs simplification. -$350 resources", effect: { resources: -350 } },
                        { message: "You shared personal information with AI, that's not safe! -$700 resources", effect: { resources: -700 } },
                        { message: "You relied completely on AI without thinking, developing bad habits. -$400 resources", effect: { resources: -400 } },
                        { message: "You used AI for homework but didn't understand the content! -$450 resources", effect: { resources: -450 } },
                        { message: "Your AI usage plan was poorly thought out, wasting time. -$550 resources", effect: { resources: -550 } },
                        { message: "You forgot to cite AI-generated content. -$300 resources", effect: { resources: -300 } }
                    ];
                } else if (this.currentLanguage === "zh-tw") {
                    return [
                        { message: "ä½ çš„æç¤ºè©å¤ªæ¨¡ç³Šäº†ï¼ŒAIä¸ç†è§£ä½ æƒ³è¦ä»€éº¼ã€‚-$600è³‡é‡‘", effect: { resources: -600 } },
                        { message: "ä½ å¿˜è¨˜æª¢æŸ¥AIçš„å›ç­”ï¼Œçµæœæœ‰éŒ¯èª¤ã€‚-$300è³‡é‡‘", effect: { resources: -300 } },
                        { message: "ä½ çš„æç¤ºè©ç¼ºå°‘é‡è¦ç´°ç¯€ï¼Œæµªè²»äº†æ™‚é–“ã€‚-$500è³‡é‡‘", effect: { resources: -500 } },
                        { message: "ä½ å¿˜è¨˜äº†çµ¦AIæ˜ç¢ºçš„æŒ‡ç¤ºï¼-$400è³‡é‡‘", effect: { resources: -400 } },
                        { message: "ä½ çš„å•é¡Œéæ–¼è¤‡é›œï¼Œéœ€è¦ç°¡åŒ–ã€‚-$350è³‡é‡‘", effect: { resources: -350 } },
                        { message: "ä½ åˆ†äº«äº†å€‹äººä¿¡æ¯çµ¦AIï¼Œé€™ä¸å®‰å…¨ï¼-$700è³‡é‡‘", effect: { resources: -700 } },
                        { message: "ä½ å®Œå…¨ä¾è³´AIè€Œä¸æ€è€ƒï¼Œé¤Šæˆå£ç¿’æ…£ã€‚-$400è³‡é‡‘", effect: { resources: -400 } },
                        { message: "ä½ ä½¿ç”¨AIå®Œæˆä½œæ¥­ä½†æ²’æœ‰ç†è§£å…§å®¹ï¼-$450è³‡é‡‘", effect: { resources: -450 } },
                        { message: "ä½ çš„AIä½¿ç”¨è¨ˆåŠƒä¸å®Œå–„ï¼Œæµªè²»äº†æ™‚é–“ã€‚-$550è³‡é‡‘", effect: { resources: -550 } },
                        { message: "ä½ å¿˜è¨˜å¼•ç”¨AIç”Ÿæˆçš„å…§å®¹ã€‚-$300è³‡é‡‘", effect: { resources: -300 } }
                    ];
                } else { // Swahili
                    return [
                        { message: "Maagizo yako hayakuwa wazi, AI haikuelewa ulichotaka. -$600 fedha", effect: { resources: -600 } },
                        { message: "Ulisahau kuangalia jibu la AI na lilikuwa na makosa. -$300 fedha", effect: { resources: -300 } },
                        { message: "Maagizo yako yalikosa maelezo muhimu, kupoteza muda. -$500 fedha", effect: { resources: -500 } },
                        { message: "Ulisahau kutoa maelekezo wazi kwa AI! -$400 fedha", effect: { resources: -400 } },
                        { message: "Swali lako lilikuwa gumu sana, linahitaji kurahisishwa. -$350 fedha", effect: { resources: -350 } },
                        { message: "Ulishirikisha taarifa za kibinafsi na AI, hiyo si salama! -$700 fedha", effect: { resources: -700 } },
                        { message: "Ulitegemea kabisa AI bila kufikiri, kukuza tabia mbaya. -$400 fedha", effect: { resources: -400 } },
                        { message: "Ulitumia AI kwa kazi za nyumbani lakini haukuelewa maudhui! -$450 fedha", effect: { resources: -450 } },
                        { message: "Mpango wako wa matumizi ya AI haukufikiria vizuri, kupoteza muda. -$550 fedha", effect: { resources: -550 } },
                        { message: "Ulisahau kutaja maudhui yaliyotolewa na AI. -$300 fedha", effect: { resources: -300 } }
                    ];
                }
            }
            
            async loadQuestions() {
                try {
                    const response = await fetch('questions.json');
                    this.questionsData = await response.json();
                } catch (error) {
                    console.error('Error loading questions:', error);
                    // Fallback to empty questions if load fails
                    this.questionsData = { "en": {}, "zh-tw": {}, "sw": {} };
                }
            }
            
            getQuestions() {
                if (!this.questionsData) {
                    // Return empty object if data not loaded yet
                    return { basic: [], detailed: [], collaboration: [], tools: [], ethics: [] };
                }
                return this.questionsData[this.currentLanguage] || { basic: [], detailed: [], collaboration: [], tools: [], ethics: [] };
            }

            initializeGame() {
                this.renderTeams();
                this.setupEventListeners();
                this.updateUILanguage();
            }

            setupEventListeners() {
                document.getElementById('start-game-btn').addEventListener('click', () => this.startGame());
                document.getElementById('add-team-btn').addEventListener('click', () => this.addTeam());
                document.getElementById('roll-dice-btn').addEventListener('click', () => this.rollDice());
                document.getElementById('close-modal-btn').addEventListener('click', () => this.closeModal());
                document.getElementById('language-select').addEventListener('change', (e) => this.changeLanguage(e.target.value));
            }
            
            changeLanguage(language) {
                this.currentLanguage = language;
                // Update board spaces, opportunities, fortunes, and questions
                this.boardSpaces = this.getLocalizedBoardSpaces();
                this.opportunities = this.getOpportunities();
                this.fortunes = this.getFortunes();
                this.questions = this.getQuestions();
                
                // Update translations on the UI
                this.updateUILanguage();
                
                // Re-render teams for updated labels
                this.renderTeams();
                
                // If game has started, update the board, current turn, round counter and leaderboard
                if (this.gameStarted) {
                    this.updateCurrentTurn();
                    this.updateRoundCounter();
                    this.updateLeaderboard();
                    // Recreate board with translated spaces
                    this.createBoard();
                }
            }
            
            updateUILanguage() {
                const t = this.translations[this.currentLanguage];
                
                // Update all static UI elements with translations
                document.getElementById('game-title').textContent = t.gameTitle;
                document.getElementById('game-subtitle').textContent = t.gameSubtitle;
                document.getElementById('language-label').textContent = t.languageLabel;
                document.getElementById('settings-title').textContent = t.settingsTitle;
                document.getElementById('rounds-label').textContent = t.roundsLabel;
                document.getElementById('teams-title').textContent = t.teamsTitle;
                document.getElementById('start-game-btn').textContent = t.startGameBtn;
                document.getElementById('add-team-btn').textContent = t.addTeamBtn;
                document.getElementById('roll-dice-btn').textContent = t.rollDiceBtn;
                document.getElementById('close-modal-btn').textContent = t.continueBtn;
                
                if (this.gameStarted) {
                    document.getElementById('leaderboard-title').textContent = t.leaderboardTitle;
                    this.updateCurrentTurn();
                    this.updateRoundCounter();
                }
            }

            addTeam() {
                if (this.teams.length >= 4) {
                    alert(this.translations[this.currentLanguage].maxTeamsWarning);
                    return;
                }
                const colors = ['team-red', 'team-blue', 'team-green', 'team-yellow'];
                const usedIcons = this.teams.map(t => t.icon);
                const availableIcon = this.availableIcons.find(icon => !usedIcons.includes(icon)) || 'â™Ÿï¸';
                this.teams.push({
                    id: this.teams.length + 1,
                    name: `${this.currentLanguage === 'zh-tw' ? 'åœ˜éšŠ' : this.currentLanguage === 'sw' ? 'Timu' : 'Team'} ${this.teams.length + 1}`,
                    color: colors[this.teams.length],
                    icon: availableIcon,
                    position: 0,
                    resources: 500,
                    projects: 0
                });
                this.renderTeams();
            }

            removeTeam(teamId) {
                if (this.teams.length <= 2) {
                    alert(this.translations[this.currentLanguage].minTeamsWarning);
                    return;
                }
                this.teams = this.teams.filter(t => t.id !== teamId);
                this.renderTeams();
            }

            updateTeamName(teamId, newName) {
                const team = this.teams.find(t => t.id === teamId);
                if (team && newName.trim()) team.name = newName.trim();
            }

            renderTeams() {
                const container = document.getElementById('teams-container');
                const t = this.translations[this.currentLanguage];
                container.innerHTML = '';
                
                this.teams.forEach((team, index) => {
                    const teamCard = document.createElement('div');
                    teamCard.className = `team-card ${index === this.currentTeam && this.gameStarted ? 'active' : ''}`;
                    
                    if (this.gameStarted) {
                        // éŠæˆ²ä¸­çš„åœ˜éšŠå¡ç‰‡ - ä½¿ç”¨æ©«å‘å¸ƒå±€
                        teamCard.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div class="team-name" style="color: ${this.getTeamColor(team.color)}">${team.icon} ${team.name}</div>
                                <div class="team-stats" style="display: flex; gap: 10px; align-items: center;">
                                    <div class="stat">${t.resourcesLabel}${team.resources}</div>
                                    <div class="stat">${t.positionLabel}${team.position}</div>
                                    <div class="stat">${t.projectsLabel}${team.projects}</div>
                                </div>
                            </div>
                        `;
                    } else {
                        teamCard.innerHTML = `
                            <input type="text" class="team-name-input" value="${team.name}" 
                                onchange="game.updateTeamName(${team.id}, this.value)" 
                                placeholder="Enter team name">
                            <div style="color: ${this.getTeamColor(team.color)}; text-align: center; font-size: 2em; margin: 10px 0;">
                                ${team.icon}
                            </div>
                            <div class="team-stats">
                                <div class="stat">${t.startingResources}</div>
                                <div class="stat">${t.colorLabel}${team.color.replace('team-', '')}</div>
                            </div>
                            ${this.teams.length > 2 ? `<button class="remove-team-btn" onclick="game.removeTeam(${team.id})">${t.removeTeamBtn}</button>` : ''}
                        `;
                    }
                    
                    container.appendChild(teamCard);
                });
            }

            getTeamColor(colorClass) {
                const colors = {
                    'team-red': '#e74c3c',
                    'team-blue': '#3498db',
                    'team-green': '#27ae60',
                    'team-yellow': '#f1c40f'
                };
                return colors[colorClass] || '#333';
            }

            startGame() {
                const roundsInput = document.getElementById('max-rounds');
                this.maxRounds = parseInt(roundsInput.value) || 10;
                const t = this.translations[this.currentLanguage];
                
                if (this.maxRounds < 1 || this.maxRounds > 20) {
                    alert(t.invalidRoundsWarning);
                    return;
                }

                this.gameStarted = true;
                document.getElementById('start-game-btn').style.display = 'none';
                document.getElementById('add-team-btn').style.display = 'none';
                roundsInput.disabled = true;

                document.getElementById('dice-controls').style.display = 'flex';
                document.getElementById('game-board').style.display = 'block';
                document.getElementById('leaderboard').style.display = 'block';

                this.createBoard();
                this.placePlayers();
                this.updateCurrentTurn();
                this.updateRoundCounter();
                this.updateLeaderboard();
                this.renderTeams();
                
                this.showMessage(t.gameStartedMsg);
            }

            createBoard() {
                const board = document.getElementById('game-board');
                board.querySelectorAll('.board-space').forEach(el => el.remove());
                
                this.boardSpaces.forEach((space, index) => {
                    const spaceElement = document.createElement('div');
                    const cornerIndices = [0, 7, 13, 20];
                    spaceElement.className = `board-space space-${index} ${space.type} ${cornerIndices.includes(index) ? 'corner' : ''}`;
                    spaceElement.innerHTML = `
                        <div class="space-name">${space.name}</div>
                        ${space.cost > 0 ? `<div class="space-cost">${space.cost}</div>` : ''}
                    `;
                    board.appendChild(spaceElement);
                });
            }

            placePlayers() {
                this.teams.forEach((team, index) => {
                    const existingPlayer = document.getElementById(`player-${team.id}`);
                    if (existingPlayer) existingPlayer.remove();
                    
                    const player = document.createElement('div');
                    player.className = `player-piece ${team.color}`;
                    player.id = `player-${team.id}`;
                    player.innerHTML = `<span class="piece-icon">${team.icon}</span>`;
                    
                    const space = document.querySelector(`.space-${team.position}`);
                    const rect = space.getBoundingClientRect();
                    const boardRect = document.getElementById('game-board').getBoundingClientRect();
                    
                    player.style.left = `${rect.left - boardRect.left + 5 + (index * 25)}px`;
                    player.style.top = `${rect.top - boardRect.top + 5}px`;
                    
                    document.getElementById('game-board').appendChild(player);
                });
            }

            rollDice() {
                if (this.gameEnded) return;
                
                const dice1 = document.getElementById('dice1');
                const dice2 = document.getElementById('dice2');
                const rollBtn = document.getElementById('roll-dice-btn');
                
                rollBtn.disabled = true;
                dice1.classList.add('rolling');
                dice2.classList.add('rolling');

                setTimeout(() => {
                    const roll1 = Math.floor(Math.random() * 6) + 1;
                    const roll2 = Math.floor(Math.random() * 6) + 1;
                    const total = roll1 + roll2;
                    const t = this.translations[this.currentLanguage];
                    
                    dice1.textContent = roll1;
                    dice2.textContent = roll2;
                    dice1.classList.remove('rolling');
                    dice2.classList.remove('rolling');
                    
                    this.showMessage(`${this.teams[this.currentTeam].name}${t.rolledMsg}${roll1} + ${roll2} = ${total}`);
                    this.movePlayer(total);
                }, 1000);
            }

            async movePlayer(spaces) {
                const currentTeam = this.teams[this.currentTeam];
                const oldPosition = currentTeam.position;
                const t = this.translations[this.currentLanguage];
                
                for (let i = 0; i < spaces; i++) {
                    await new Promise(resolve => setTimeout(resolve, 400));
                    currentTeam.position = (currentTeam.position + 1) % this.boardSpaces.length;
                    this.animatePlayerMove(currentTeam, true);
                    
                    if (currentTeam.position === 0 && i > 0) {
                        currentTeam.projects += 1;
                        currentTeam.resources += 1000; // æ›´æ”¹ç¶“éèµ·é»ç²å¾—çš„é‡‘é¡ç‚º1000
                        this.showMessage(`${currentTeam.name}${t.projectCompletedMsg}`);
                    }
                }
                
                setTimeout(() => this.handleLanding(), 500);
            }

            animatePlayerMove(team, isMoving = false) {
                const player = document.getElementById(`player-${team.id}`);
                if (!player) return;
                
                if (isMoving) player.classList.add('moving');
                else player.classList.remove('moving');
                
                const space = document.querySelector(`.space-${team.position}`);
                if (!space) return;
                
                const rect = space.getBoundingClientRect();
                const boardRect = document.getElementById('game-board').getBoundingClientRect();
                const teamIndex = this.teams.findIndex(t => t.id === team.id);
                
                player.style.left = `${rect.left - boardRect.left + 5 + (teamIndex * 25)}px`;
                player.style.top = `${rect.top - boardRect.top + 5}px`;
            }

            handleLanding() {
                const currentTeam = this.teams[this.currentTeam];
                const space = this.boardSpaces[currentTeam.position];
                this.currentSpaceCost = space.cost;
                const t = this.translations[this.currentLanguage];
                
                if (space.type === 'start') { 
                    this.showMessage(`${t.landedOnMsg}${space.name}!`);
                    setTimeout(() => this.nextTurn(), 1500);
                } else if (space.type === 'toolkit') {
                    this.handleToolkit();
                } else if (space.type === 'opportunity') {
                    this.handleOpportunity();
                } else if (space.type === 'fortune') {
                    this.handleFortune();
                } else {
                    this.askQuestion(space.type);
                }
            }
            
            handleToolkit() {
                const currentTeam = this.teams[this.currentTeam];
                const t = this.translations[this.currentLanguage];
                
                const modal = document.getElementById('question-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalQuestion = document.getElementById('modal-question');
                const modalOptions = document.getElementById('modal-options');
                
                modalTitle.textContent = t.toolkitTitle;
                modalQuestion.innerHTML = t.toolkitQuestion;
                modalOptions.innerHTML = '';
                
                const yesBtn = document.createElement('div');
                yesBtn.className = 'option';
                yesBtn.textContent = t.toolkitYes;
                yesBtn.onclick = () => {
                    window.open('https://www.google.com/search?q=free+ai+tools+for+students', '_blank');
                    this.showMessage(t.toolkitOpenedMsg);
                    const options = document.querySelectorAll('.option');
                    options.forEach(opt => opt.onclick = null);
                    yesBtn.classList.add('correct');
                    document.getElementById('close-modal-btn').style.display = 'block';
                };
                
                const noBtn = document.createElement('div');
                noBtn.className = 'option';
                noBtn.textContent = t.toolkitNo;
                noBtn.onclick = () => {
                    this.showMessage(t.continuingGameMsg);
                    const options = document.querySelectorAll('.option');
                    options.forEach(opt => opt.onclick = null);
                    noBtn.classList.add('correct');
                    document.getElementById('close-modal-btn').style.display = 'block';
                };
                
                modalOptions.appendChild(yesBtn);
                modalOptions.appendChild(noBtn);
                
                modal.style.display = 'block';
                document.getElementById('close-modal-btn').style.display = 'none';
            }
            
            handleOpportunity() {
                const opportunity = this.opportunities[Math.floor(Math.random() * this.opportunities.length)];
                const currentTeam = this.teams[this.currentTeam];
                const t = this.translations[this.currentLanguage];
                
                const modal = document.getElementById('question-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalQuestion = document.getElementById('modal-question');
                const modalOptions = document.getElementById('modal-options');
                
                modalTitle.textContent = t.opportunityTitle;
                modalQuestion.textContent = opportunity.message;
                modalOptions.innerHTML = '';
                
                if (opportunity.effect.resources) {
                    currentTeam.resources += opportunity.effect.resources;
                }
                
                currentTeam.resources = Math.max(0, currentTeam.resources);
                
                modal.style.display = 'block';
                document.getElementById('close-modal-btn').style.display = 'block';
            }
            
            handleFortune() {
                const fortune = this.fortunes[Math.floor(Math.random() * this.fortunes.length)];
                const currentTeam = this.teams[this.currentTeam];
                const t = this.translations[this.currentLanguage];
                
                const modal = document.getElementById('question-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalQuestion = document.getElementById('modal-question');
                const modalOptions = document.getElementById('modal-options');
                
                modalTitle.textContent = t.fortuneTitle;
                modalQuestion.textContent = fortune.message;
                modalOptions.innerHTML = '';
                
                if (fortune.effect.resources) {
                    currentTeam.resources += fortune.effect.resources;
                }
                
                currentTeam.resources = Math.max(0, currentTeam.resources);
                
                modal.style.display = 'block';
                document.getElementById('close-modal-btn').style.display = 'block';
            }

            askQuestion(category) {
                const questionSet = this.questions[category];
                const question = questionSet[Math.floor(Math.random() * questionSet.length)];
                const t = this.translations[this.currentLanguage];
                
                const modal = document.getElementById('question-modal');
                const modalTitle = document.getElementById('modal-title');
                const modalQuestion = document.getElementById('modal-question');
                const modalOptions = document.getElementById('modal-options');
                
                // Get the category name with first letter capitalized based on language
                let categoryName;
                if (this.currentLanguage === "en") {
                    categoryName = category.charAt(0).toUpperCase() + category.slice(1);
                } else if (this.currentLanguage === "zh-tw") {
                    const categoryMap = {
                        "basic": "åŸºæœ¬æç¤º",
                        "detailed": "è©³ç´°æç¤º",
                        "collaboration": "AIå”ä½œ",
                        "tools": "AIå·¥å…·",
                        "ethics": "AIå€«ç†"
                    };
                    categoryName = categoryMap[category];
                } else { // Swahili
                    const categoryMap = {
                        "basic": "Maagizo Msingi",
                        "detailed": "Maagizo Kamili",
                        "collaboration": "Ushirikiano wa AI",
                        "tools": "Zana za AI",
                        "ethics": "Maadili ya AI"
                    };
                    categoryName = categoryMap[category];
                }
                
                modalTitle.textContent = `${categoryName} ${t.questionTitle}`;
                modalQuestion.textContent = question.question;
                modalOptions.innerHTML = '';
                
                question.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.textContent = option;
                    optionDiv.onclick = () => this.answerQuestion(index, question.correct, question.reward);
                    modalOptions.appendChild(optionDiv);
                });
                
                modal.style.display = 'block';
                document.getElementById('close-modal-btn').style.display = 'none';
            }

            answerQuestion(selected, correct, reward) {
                const options = document.querySelectorAll('.option');
                const t = this.translations[this.currentLanguage];
                
                options.forEach((opt, idx) => {
                    opt.onclick = null;
                    if (idx === correct) {
                        opt.classList.add('correct');
                    } else if (idx === selected && idx !== correct) {
                        opt.classList.add('incorrect');
                    }
                });
                
                const currentTeam = this.teams[this.currentTeam];
                
                if (selected === correct) {
                    // ç­”å°äº†ç²å¾—çå‹µé‡‘é¡
                    currentTeam.resources += reward;
                    this.showMessage(`${t.correctAnswerMsg}${reward}${t.correctAnswerMsg2}`);
                } else {
                    // ç­”éŒ¯äº†æ²’æœ‰çå‹µ
                    this.showMessage(t.incorrectAnswerMsg);
                }
                
                currentTeam.resources = Math.max(0, currentTeam.resources);
                
                document.getElementById('close-modal-btn').style.display = 'block';
            }

            closeModal() {
                document.getElementById('question-modal').style.display = 'none';
                this.updateLeaderboard();
                this.renderTeams();
                this.nextTurn();
            }

            nextTurn() {
                this.turnCount++;
                this.currentTeam = (this.currentTeam + 1) % this.teams.length;
                
                if (this.currentTeam === 0) {
                    this.currentRound++;
                    this.updateRoundCounter();
                    
                    if (this.currentRound > this.maxRounds) {
                        this.endGame();
                        return;
                    }
                }
                
                this.updateCurrentTurn();
                this.renderTeams();
                document.getElementById('roll-dice-btn').disabled = false;
            }

            updateCurrentTurn() {
                const currentTurnDiv = document.getElementById('current-turn');
                const currentTeam = this.teams[this.currentTeam];
                const t = this.translations[this.currentLanguage];
                currentTurnDiv.innerHTML = `<strong>${t.currentTurnLabel}${currentTeam.icon} ${currentTeam.name}</strong>`;
            }

            updateRoundCounter() {
                const roundCounter = document.getElementById('round-counter');
                const t = this.translations[this.currentLanguage];
                roundCounter.innerHTML = `<strong>${t.roundLabel}${this.currentRound} / ${this.maxRounds}</strong>`;
            }

            updateLeaderboard() {
                const leaderboardContent = document.getElementById('leaderboard-content');
                const sortedTeams = [...this.teams].sort((a, b) => b.resources - a.resources); // ä¾æ“šè³‡é‡‘æ’åº
                const t = this.translations[this.currentLanguage];
                
                leaderboardContent.innerHTML = '';
                sortedTeams.forEach((team, index) => {
                    const row = document.createElement('div');
                    row.className = `leaderboard-row ${index === 0 ? 'first' : ''}`;
                    row.innerHTML = `
                        <span>${index + 1}. ${team.icon} ${team.name}</span>
                        <span>${t.resourcesLabel}${team.resources}</span>
                    `;
                    leaderboardContent.appendChild(row);
                });
            }

            endGame() {
                this.gameEnded = true;
                document.getElementById('roll-dice-btn').disabled = true;
                
                const sortedTeams = [...this.teams].sort((a, b) => b.resources - a.resources); // ä¾æ“šè³‡é‡‘æ’åº
                const winner = sortedTeams[0];
                const t = this.translations[this.currentLanguage];
                
                const announcement = document.createElement('div');
                announcement.className = 'winner-announcement';
                announcement.innerHTML = `
                    <h2>${t.winnerAnnouncement}</h2>
                    <p>${winner.icon} ${winner.name}${t.winnerMsg}${winner.resources}${t.winnerMsg2}</p>
                    <p style="margin-top: 15px;">${t.finalStandingsMsg}</p>
                    ${sortedTeams.map((team, idx) => 
                        `<p>${idx + 1}. ${team.icon} ${team.name} - $${team.resources} ${this.currentLanguage === "en" ? "resources" : this.currentLanguage === "zh-tw" ? "è³‡é‡‘" : "fedha"}</p>`
                    ).join('')}
                `;
                
                document.querySelector('.game-setup').prepend(announcement);
                this.showMessage(t.gameOverMsg);
            }

            showMessage(text) {
                const existingToast = document.querySelector('.message-toast');
                if (existingToast) existingToast.remove();
                
                const toast = document.createElement('div');
                toast.className = 'message-toast';
                toast.textContent = text;
                document.body.appendChild(toast);
                
                setTimeout(() => toast.remove(), 3000);
            }
        }

        const game = new AIMonopoly();
    </script>
    <div class="footer">
        é‡Œé•·ä¼¯å¹«åŠ©æ‚¨ç”¨AIç©è½‰æ•æ· | Provided by <a href="https://www.linkedin.com/in/taochunliu/" target="_blank" rel="noopener noreferrer">Tao Chun Liu (PM Mayors)</a>
    </div>
</body>
</html>